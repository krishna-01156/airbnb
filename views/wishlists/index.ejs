<% layout("/layouts/boilerplate") -%>

<div class="container mt-5 mb-5">
  <h2 class="fw-bold fs-1 mb-4">Your Wishlists</h2>

  <% if (wishlists.length === 0) { %>
    <p>You have no wishlists yet.</p>
  <% } else { %>
    <% wishlists.forEach(wishlist => { %>
      <div class="mb-5">
        <h4 class="fw-semibold mb-3"><%= wishlist.name %></h4>

        <% if (wishlist.listings.length === 0) { %>
          <p class="text-muted">No listings in this wishlist.</p>
        <% } else { %>
          <div class="d-flex overflow-auto gap-4 pb-2">
            <% wishlist.listings.forEach(listing => { %>
              <a href="/listings/<%= listing._id %>" class="text-decoration-none text-dark">
                <div class="card border-0 shadow-sm rounded" style="min-width: 300px;">
                  <img src="<%= listing.image.url %>" class="card-img-top rounded-top"
                       style="height: 200px; object-fit: cover;" alt="<%= listing.title %>">
                  <div class="card-body px-3 pb-3">
                    <p class="fw-medium mb-1"><%= listing.title %></p>
                    <small class="text-muted">â‚¹<%= listing?.price?.toLocaleString("en-IN") || 'N/A' %>/night</small>
                  </div>
                </div>
              </a>
            <% }) %>
          </div>
        <% } %>
      </div>
    <% }) %>
  <% } %>
</div>

<style>
  .card:hover {
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
    transition: box-shadow 0.3s ease;
  }
</style>
